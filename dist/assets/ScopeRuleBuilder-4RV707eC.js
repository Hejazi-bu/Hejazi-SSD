import{u as R,r as s,k as e,v as k,J as $}from"./index-DjQnKye2.js";import{F as g}from"./PlusIcon-VqZkTY5V.js";import{F as A}from"./ScopeList-B0c6YktL.js";import{F as h}from"./UserGroupIcon-1ZI4lWI9.js";const B=({jobs:b,companies:v,sectors:j,departments:f,sections:y,onAddRule:N,t:D})=>{const{language:w}=R(),a=w==="ar",[r,d]=s.useState(""),[i,x]=s.useState(""),[l,_]=s.useState(""),[n,m]=s.useState(""),[p,c]=s.useState(""),[o,u]=s.useState(!1),S=f.filter(t=>!l||String(t.sector_id)===String(l)),C=y.filter(t=>!n||String(t.department_id)===String(n)),F=()=>{if(!r)return;N({target_job_id:r,scope_company_id:i||null,restricted_to_company:o,scope_sector_id:l||null,scope_department_id:n||null,scope_section_id:p||null}),d("")};return e.jsxs("div",{className:"bg-gray-800/30 border border-gray-700 rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-400 mb-4 flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"})," إضافة قاعدة نطاق جديدة"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs text-gray-400",children:["الوظيفة المستهدفة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:r,onChange:t=>d(t.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 pl-9 text-sm text-white focus:border-blue-500 appearance-none",children:[e.jsx("option",{value:"",children:"اختر الوظيفة..."}),e.jsx("option",{value:"ALL",children:"-- كل الوظائف --"}),b.map(t=>e.jsx("option",{value:t.id,children:a?t.name_ar:t.name_en},t.id))]}),e.jsx(k,{className:"w-4 h-4 text-gray-500 absolute left-3 top-2.5 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400",children:"الشركة (النطاق)"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:i,onChange:t=>{x(t.target.value),t.target.value&&u(!1)},disabled:o,className:`w-full bg-gray-900 border border-gray-600 rounded-lg p-2 pl-9 text-sm text-white focus:border-blue-500 appearance-none ${o?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx("option",{value:"",children:"-- كل الشركات --"}),v.map(t=>e.jsx("option",{value:t.id,children:a?t.name_ar:t.name_en},t.id))]}),e.jsx($,{className:"w-4 h-4 text-gray-500 absolute left-3 top-2.5 pointer-events-none"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"checkbox",id:"restricted",checked:o,onChange:t=>{u(t.target.checked),t.target.checked&&x("")},className:"rounded bg-gray-700 border-gray-600 text-blue-500 focus:ring-0"}),e.jsx("label",{htmlFor:"restricted",className:"text-[10px] text-gray-400 cursor-pointer select-none",children:"قصر النطاق على شركة الموظف المانح فقط"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400",children:"القطاع"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:l,onChange:t=>{_(t.target.value),m(""),c("")},className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 pl-9 text-sm text-white focus:border-blue-500 appearance-none",children:[e.jsx("option",{value:"",children:"-- كل القطاعات --"}),j.map(t=>e.jsx("option",{value:t.id,children:a?t.name_ar:t.name_en},t.id))]}),e.jsx(A,{className:"w-4 h-4 text-gray-500 absolute left-3 top-2.5 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400",children:"الإدارة"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:n,onChange:t=>{m(t.target.value),c("")},className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 pl-9 text-sm text-white focus:border-blue-500 appearance-none",children:[e.jsx("option",{value:"",children:"-- كل الإدارات --"}),S.map(t=>e.jsx("option",{value:t.id,children:a?t.name_ar:t.name_en},t.id))]}),e.jsx(h,{className:"w-4 h-4 text-gray-500 absolute left-3 top-2.5 pointer-events-none"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs text-gray-400",children:"القسم"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:p,onChange:t=>c(t.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-2 pl-9 text-sm text-white focus:border-blue-500 appearance-none",children:[e.jsx("option",{value:"",children:"-- كل الأقسام --"}),C.map(t=>e.jsx("option",{value:t.id,children:a?t.name_ar:t.name_en},t.id))]}),e.jsx(h,{className:"w-4 h-4 text-gray-500 absolute left-3 top-2.5 pointer-events-none"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:F,disabled:!r,className:`w-full py-2 rounded-lg font-bold flex items-center justify-center gap-2 transition-all ${r?"bg-blue-500 hover:bg-blue-600 text-white shadow-lg shadow-blue-500/20":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(g,{className:"w-5 h-5"})," إضافة القاعدة"]})})]})]})};export{B as S};
