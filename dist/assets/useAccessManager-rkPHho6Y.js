import{at as U,b as R,r as o,D as l}from"./index-AlbxRJrk.js";const P=()=>{const r=U(),{showDialog:f}=R(),[y,c]=o.useState(!1),u=(s,a)=>{console.error(`${a}:`,s);let e="حدث خطأ غير متوقع.";return s instanceof Error&&(e=s.message),e=e.replace("INTERNAL","").trim(),f({title:a,message:e,variant:"error"}),!1},d=o.useCallback(async(s,a)=>{c(!0);try{return(await l(r,"manageUserPermissionsSecure")({targetUserId:s,permissions:a})).data.success}catch(e){return u(e,"خطأ في تحديث استثناءات المستخدم")}finally{c(!1)}},[r,f]),b=o.useCallback(async(s,a,e)=>{c(!0);try{return(await l(r,"manageJobPermissions")({p_job_id:s,p_permissions_to_add:a,p_permissions_to_remove:e})).data.success}catch(n){return u(n,"خطأ في تحديث صلاحيات الوظيفة")}finally{c(!1)}},[r,f]),p=o.useCallback(async(s,a,e,n)=>{c(!0);try{return(await l(r,"manageJobAccessResourcesSecure")({targetJobId:s,resourceData:a,action:e,docId:n})).data.success}catch(t){return u(t,"خطأ في موارد الوظيفة (وصول)")}finally{c(!1)}},[r]),m=o.useCallback(async(s,a,e,n)=>{c(!0);try{return(await l(r,"manageJobAccessScopeSecure")({targetJobId:s,scopeData:a,action:e,docId:n})).data.success}catch(t){return u(t,"خطأ في نطاق الوظيفة (وصول)")}finally{c(!1)}},[r]),g=o.useCallback(async(s,a,e,n)=>{c(!0);try{return(await l(r,"manageUserAccessResourcesSecure")({targetUserId:s,resourceData:a,action:e,docId:n})).data.success}catch(t){return u(t,"خطأ في موارد المستخدم (وصول)")}finally{c(!1)}},[r]),C=o.useCallback(async(s,a,e,n)=>{c(!0);try{return(await l(r,"manageUserAccessScopeSecure")({targetUserId:s,scopeData:a,action:e,docId:n})).data.success}catch(t){return u(t,"خطأ في نطاق المستخدم (وصول)")}finally{c(!1)}},[r]),S=o.useCallback(async(s,a)=>{c(!0);try{return(await l(r,"manageControlDelegationSecure")({targetUserId:s,scopeToAdd:a})).data.success?(f({title:"تم بنجاح",message:"تم منح صلاحية التحكم.",variant:"success"}),!0):!1}catch(e){return u(e,"فشل تفويض التحكم")}finally{c(!1)}},[r,f]),h=o.useCallback(async(s,a,e,n)=>{c(!0);try{return(await l(r,"manageJobControlResourcesSecure")({targetJobId:s,resourceData:a,action:e,docId:n})).data.success}catch(t){return u(t,"خطأ في موارد التحكم للوظيفة")}finally{c(!1)}},[r]),w=o.useCallback(async(s,a,e,n)=>{c(!0);try{return(await l(r,"manageJobControlScopeSecure")({targetJobId:s,scopeData:a,action:e,docId:n})).data.success}catch(t){return u(t,"خطأ في نطاق التحكم للوظيفة")}finally{c(!1)}},[r]),k=o.useCallback(async(s,a,e,n)=>{c(!0);try{return(await l(r,"manageUserControlResourcesSecure")({targetUserId:s,resourceData:a,action:e,docId:n})).data.success}catch(t){return u(t,"خطأ في موارد التحكم للمستخدم")}finally{c(!1)}},[r]),J=o.useCallback(async(s,a,e,n)=>{c(!0);try{return(await l(r,"manageUserControlScopeSecure")({targetUserId:s,scopeData:a,action:e,docId:n})).data.success}catch(t){return u(t,"خطأ في نطاق التحكم للمستخدم")}finally{c(!1)}},[r]),A=o.useCallback(async(s,a,e)=>{c(!0);try{return(await l(r,"manageJobDistribution")({action:s,payload:a||{},docId:e})).data.success}catch(n){return u(n,"خطأ في إدارة توزيع الوظيفة")}finally{c(!1)}},[r]);return{isSubmitting:y,updateUserPermissions:d,updateJobPermissions:b,updateJobAccessResources:p,updateJobAccessScope:m,updateUserAccessResources:g,updateUserAccessScope:C,grantControlDelegation:S,updateJobControlResources:h,updateJobControlScope:w,updateUserControlResources:k,updateUserControlScope:J,manageJobDistribution:A}};export{P as u};
