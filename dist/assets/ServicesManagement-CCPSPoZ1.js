import{u as Fe,a as Ie,b as ke,c as Te,d as Pe,r as c,D as Me,E as Ee,g as A,q as $,o as X,h as R,i as G,w as Z,k as e,A as ae,m as C,l as Le,s as Oe,x as H,B as qe,n as Y,ax as B,z as le,au as oe,ay as Ae}from"./index-AlbxRJrk.js";import{F as $e}from"./CogIcon-Cm0Oc8sb.js";import{F as Re,a as Ge}from"./TrashIcon-DqVoRP7K.js";import{F as ie}from"./PencilIcon-DZheH_sc.js";import{F as se}from"./ChevronLeftIcon-CoSclDdo.js";import{F as re}from"./ChevronRightIcon-CG6pqeHi.js";const ne=Object.keys(Ae).sort(),V=()=>({toFirestore:l=>l,fromFirestore:(l,w)=>({id:l.id,...l.data(w)})}),p=({label:l,name:w,value:j,onChange:u,type:g="text",required:x=!1})=>e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-semibold text-gray-300 text-sm",children:[l," ",x&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:g,name:w,value:j,onChange:u,required:x,className:"w-full bg-gray-700 p-2.5 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FFD700] text-white"})]}),z=({label:l,name:w,value:j,onOpenPicker:u,required:g=!1,translations:x,language:s})=>{const r=x[s];return e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-1 font-semibold text-gray-300 text-sm",children:[l," ",g&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 p-2.5 rounded-md border border-gray-600 bg-gray-700 flex items-center gap-3",children:[e.jsx(B,{name:j,className:"w-5 h-5 text-[#FFD700] flex-shrink-0"}),e.jsx("span",{className:"text-white truncate",dir:"ltr",children:j||r.common.selectIconPrompt})]}),e.jsx(C.button,{type:"button",onClick:()=>u(j,w),variants:Y,whileHover:"hover",whileTap:"tap",className:"p-2.5 rounded-md bg-[#FFD700] text-black font-bold hover:bg-yellow-400 transition-colors flex items-center gap-1.5 flex-shrink-0",children:e.jsx(ie,{className:"w-5 h-5"})})]})]})},ee=({label:l,name:w,checked:j,onChange:u})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",name:w,checked:j,onChange:u,className:"w-5 h-5 bg-gray-700 border-gray-600 rounded text-[#FFD700] focus:ring-[#FFD700]/50"}),e.jsx("label",{className:"font-semibold text-gray-300 text-sm",children:l})]});function Ve({isOpen:l,onClose:w,onSelectIcon:j,language:u,translations:g,initialIcon:x}){const s=g[u],[r,I]=c.useState(""),[m,_]=c.useState(1),T=30,b=c.useMemo(()=>r?ne.filter(a=>a.toLowerCase().includes(r.toLowerCase())):ne,[r]),F=Math.ceil(b.length/T),o=c.useMemo(()=>{const a=(m-1)*T;return b.slice(a,a+T)},[b,m]);c.useEffect(()=>{_(1)},[r]);const P=a=>{j(a)},v=u==="ar"?se:re;return e.jsx(ae,{children:l&&e.jsx(C.div,{variants:le,initial:"initial",animate:"animate",exit:"exit",className:"fixed inset-0 bg-black/70 z-[70] p-4 sm:p-6 overflow-y-auto flex items-center justify-center",children:e.jsxs(C.div,{variants:Y,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-sm sm:max-w-2xl shadow-2xl m-auto h-[85vh] flex flex-col",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"p-4 sm:p-6 flex-shrink-0 border-b border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:s.modalTitles.selectIcon}),e.jsx("button",{type:"button",onClick:w,className:"p-1 rounded-full text-gray-400 hover:text-white hover:bg-gray-700 transition-colors",children:e.jsx(oe,{className:"w-6 h-6"})})]}),e.jsx("input",{type:"text",placeholder:s.common.searchIcon,value:r,onChange:a=>I(a.target.value),className:"w-full bg-gray-700 p-2.5 rounded-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FFD700] text-white"}),x&&e.jsxs("div",{className:"mt-3 text-sm text-gray-400 flex items-center gap-2",children:[e.jsxs("span",{children:[s.common.currentIcon,":"]}),e.jsx(B,{name:x,className:"w-4 h-4 text-[#FFD700]"}),e.jsx("span",{className:"text-white font-semibold truncate",dir:"ltr",children:x})]})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto p-4 custom-scrollbar grid grid-cols-4 sm:grid-cols-6 md:grid-cols-7 lg:grid-cols-8 gap-4",children:[o.map(a=>e.jsxs(C.div,{variants:H,whileHover:"hover",whileTap:"tap",onClick:()=>P(a),className:`p-3 flex flex-col items-center justify-center rounded-lg border transition-colors cursor-pointer group ${a===x?"border-[#FFD700] bg-yellow-400/20":"border-gray-700 bg-gray-800 hover:bg-yellow-400/20"}`,children:[e.jsx(B,{name:a,className:"w-6 h-6 text-white group-hover:text-[#FFD700] transition-colors"}),e.jsx("span",{className:"text-xs text-center text-gray-400 mt-1 truncate w-full group-hover:text-gray-200 transition-colors",dir:"ltr",children:a})]},a)),o.length===0&&e.jsx("p",{className:"text-gray-400 col-span-full text-center p-8",children:s.common.noIconsFound})]}),F>1&&e.jsxs("div",{className:"flex justify-center items-center gap-4 p-4 border-t border-gray-700 flex-shrink-0",children:[e.jsx("button",{onClick:()=>_(a=>Math.max(1,a-1)),disabled:m===1,className:"p-2 rounded-full text-gray-400 hover:text-white disabled:opacity-50",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm text-gray-300",children:[s.common.page," ",m," ",s.common.of," ",F]}),e.jsx("button",{onClick:()=>_(a=>Math.min(F,a+1)),disabled:m===F,className:"p-2 rounded-full text-gray-400 hover:text-white disabled:opacity-50",children:u==="ar"?e.jsx(re,{className:"w-5 h-5"}):e.jsx(se,{className:"w-5 h-5"})})]})]})},"icon-picker-modal-unique-key")})}function ze({modalState:l,onClose:w,onSave:j,translations:u,language:g,onOpenIconPicker:x}){const s=u[g],[r,I]=c.useState({}),[m,_]=c.useState(!1),T={service_group:s.modalTitles.service_group,service:s.modalTitles.service,sub_service:s.modalTitles.sub_service,sub_sub_service:s.modalTitles.sub_sub_service},b=l.isOpen?`${l.mode==="create"?s.modalTitles.create:s.modalTitles.edit} ${T[l.type]}`:"";c.useEffect(()=>{l.isOpen&&I(l.data)},[l]);const F=c.useMemo(()=>{if(!l.isOpen||l.mode==="create")return!0;const a=l.originalData,h=r,d=Object.keys(h).filter(S=>S!=="id");for(const S of d){const D=a[S]??(typeof h[S]=="string"?"":null),M=h[S]??(typeof a[S]=="string"?"":null);if(typeof D!="string"){if(D!==M)return!0}else{const L=String(D).replace(/\s/g,""),t=String(M).replace(/\s/g,"");if(L!==t)return!0}}return!1},[r,l]),o=a=>{const{name:h,value:d,type:S}=a.target;let D=d;S==="number"&&(D=d===""?null:Number(d)),a.target.type==="checkbox"&&(D=a.target.checked),(h==="page"||h==="component")&&(D=D.replace(/\s/g,"")),I(M=>({...M,[h]:D}))},P=async a=>{a.preventDefault();const h={...r};for(const d in h)typeof h[d]=="string"&&((d.includes("label")||d.includes("name"))&&(h[d]=h[d].trim()),(d==="page"||d==="component")&&(h[d]=h[d].replace(/\s/g,"")));_(!0),await j(h),_(!1)},v=()=>{if(!l.isOpen)return null;switch(l.type){case"service_group":return e.jsxs(e.Fragment,{children:[e.jsx(p,{name:"name_ar",label:s.fields.name_ar,value:r.name_ar||"",onChange:o,required:!0}),e.jsx(p,{name:"name_en",label:s.fields.name_en,value:r.name_en||"",onChange:o,required:!0}),e.jsx(p,{name:"page",label:s.fields.page,value:r.page||"",onChange:o,required:!0}),e.jsx(z,{name:"icon",label:s.fields.icon,value:r.icon||"",onOpenPicker:x,translations:u,language:g}),e.jsx(p,{name:"order",label:s.fields.order,type:"number",value:r.order??1,onChange:o,required:!0})]});case"service":return e.jsxs(e.Fragment,{children:[e.jsx(p,{name:"label_ar",label:s.fields.label_ar,value:r.label_ar||"",onChange:o,required:!0}),e.jsx(p,{name:"label_en",label:s.fields.label_en,value:r.label_en||"",onChange:o,required:!0}),e.jsx(p,{name:"page",label:s.fields.page,value:r.page||"",onChange:o,required:!0}),e.jsx(z,{name:"icon",label:s.fields.icon,value:r.icon||"",onOpenPicker:x,required:!0,translations:u,language:g}),e.jsx(p,{name:"order",label:s.fields.order,type:"number",value:r.order??1,onChange:o,required:!0}),e.jsx(ee,{name:"is_allowed",label:s.fields.is_allowed,checked:r.is_allowed||!1,onChange:o})]});case"sub_service":return e.jsxs(e.Fragment,{children:[e.jsx(p,{name:"label_ar",label:s.fields.label_ar,value:r.label_ar||"",onChange:o,required:!0}),e.jsx(p,{name:"label_en",label:s.fields.label_en,value:r.label_en||"",onChange:o,required:!0}),e.jsx(p,{name:"page",label:s.fields.page,value:r.page||"",onChange:o,required:!0}),e.jsx(p,{name:"component",label:s.fields.component,value:r.component||"",onChange:o,required:!0}),e.jsx(z,{name:"icon",label:s.fields.icon,value:r.icon||"",onOpenPicker:x,required:!0,translations:u,language:g}),e.jsx(p,{name:"order",label:s.fields.order,type:"number",value:r.order??1,onChange:o,required:!0}),e.jsx(ee,{name:"is_allowed",label:s.fields.is_allowed,checked:r.is_allowed||!1,onChange:o})]});case"sub_sub_service":return e.jsxs(e.Fragment,{children:[e.jsx(p,{name:"label_ar",label:s.fields.label_ar,value:r.label_ar||"",onChange:o,required:!0}),e.jsx(p,{name:"label_en",label:s.fields.label_en,value:r.label_en||"",onChange:o,required:!0}),e.jsx(z,{name:"icon",label:s.fields.icon,value:r.icon||"",onOpenPicker:x,translations:u,language:g}),e.jsx(ee,{name:"is_allowed",label:s.fields.is_allowed,checked:r.is_allowed||!1,onChange:o})]});default:return null}};return e.jsx(ae,{children:l.isOpen&&e.jsx(C.div,{variants:le,initial:"initial",animate:"animate",exit:"exit",className:"fixed inset-0 bg-black/70 z-[60] p-4 sm:p-6 overflow-y-auto flex items-center justify-center",children:e.jsx(C.div,{variants:Y,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-sm sm:max-w-lg shadow-2xl m-auto",onClick:a=>a.stopPropagation(),children:e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:b}),e.jsx("button",{type:"button",onClick:w,className:"p-1 rounded-full text-gray-400 hover:text-white hover:bg-gray-700 transition-colors",children:e.jsx(oe,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2 custom-scrollbar",children:v()})]}),e.jsxs("div",{className:"bg-gray-800/50 px-6 py-3 flex justify-end gap-3 rounded-b-2xl",children:[e.jsx("button",{type:"button",onClick:w,className:"py-2 px-4 rounded-lg text-white hover:bg-gray-700 transition-colors",children:s.common.cancel}),e.jsx("button",{type:"submit",disabled:m||!F,className:"py-2 px-4 rounded-lg bg-[#FFD700] text-black font-bold hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?s.common.saving:s.common.save})]})]})},"management-modal-content")},"management-modal-overlay")})}function Xe(){const{language:l}=Fe(),{user:w,hasPermission:j,isLoading:u}=Ie(),{showDialog:g}=ke(),{setPageLoading:x}=Te(),{showActionLoading:s,hideActionLoading:r}=Pe(),I=j("s:1"),m=j("ss9"),[_,T]=c.useState(null),[b,F]=c.useState(null),[o,P]=c.useState(null),[v,a]=c.useState({isOpen:!1}),[h,d]=c.useState(!1),[S,D]=c.useState(null),M=c.useRef(Me(Ee,"manageServiceConfiguration")),L=c.useMemo(()=>({ar:{pageTitle:"إدارة الخدمات والصلاحيات",permissionDenied:"ليس لديك الصلاحية لإدارة هذا القسم.",columnTitles:{groups:"مجموعات الخدمات",services:"الخدمات الرئيسية",subServices:"الصفحات",subSubServices:"الاجراءات"},modalTitles:{create:"إنشاء",edit:"تعديل",service_group:"مجموعة خدمات",service:"خدمة رئيسية",sub_service:"صفحة",sub_sub_service:"اجراء",selectIcon:"اختيار الأيقونة"},fields:{name_ar:"الاسم (عربي)",name_en:"الاسم (إنجليزي)",label_ar:"العنوان (عربي)",label_en:"العنوان (إنجليزي)",order:"الترتيب",page:"رابط الصفحة (Page)",icon:"الأيقونة (Icon Name)",is_allowed:"مسموح به",component:"المكون (Component Name)"},common:{save:"حفظ",saving:"جاري الحفظ...",cancel:"إلغاء",delete:"حذف",edit:"تعديل",selectGroup:"اختر مجموعة لعرض خدماتها",selectService:"اختر خدمة لعرض توابعها",noData:"لا توجد بيانات",confirmDeleteTitle:"تأكيد الحذف",confirmDeleteMessage:"هل أنت متأكد أنك تريد حذف هذا العنصر؟ لا يمكن التراجع عن هذا الإجراء.",successTitle:"نجاح",successSave:"تم حفظ التغييرات بنجاح.",successDelete:"تم حذف العنصر بنجاح.",errorTitle:"خطأ",errorSave:"فشل حفظ التغييرات.",errorDelete:"فشل حذف العنصر.",searchIcon:"البحث عن أيقونة...",noIconsFound:"لم يتم العثور على أي أيقونة مطابقة للبحث.",page:"صفحة",of:"من",selectIconPrompt:"اضغط للاختيار",currentIcon:"الأيقونة الحالية"}},en:{pageTitle:"Services & Permissions Management",permissionDenied:"You do not have permission to manage this section.",columnTitles:{groups:"Service Groups",services:"Main Services",subServices:"Pages",subSubServices:"Actions"},modalTitles:{create:"Create",edit:"Edit",service_group:"Service Group",service:"Main Service",sub_service:"Page",sub_sub_service:"Action",selectIcon:"Select Icon"},fields:{name_ar:"Name (Arabic)",name_en:"Name (English)",label_ar:"Label (Arabic)",label_en:"Label (English)",order:"Order",page:"Page Path",icon:"Icon Name",is_allowed:"Is Allowed",component:"Component Name"},common:{save:"Save",saving:"Saving...",cancel:"Cancel",delete:"Delete",edit:"Edit",selectGroup:"Select a group to view its services",selectService:"Select a service to view its items",noData:"No data found",confirmDeleteTitle:"Confirm Deletion",confirmDeleteMessage:"Are you sure you want to delete this item? This action cannot be undone.",successTitle:"Success",successSave:"Changes saved successfully.",successDelete:"Item deleted successfully.",errorTitle:"Error",errorSave:"Failed to save changes.",errorDelete:"Failed to delete item.",searchIcon:"Search icon...",noIconsFound:"No matching icon found.",page:"Page",of:"of",selectIconPrompt:"Click to select",currentIcon:"Current Icon"}}}),[l]),t=L[l],ce=(n,i)=>{D({fieldName:i,icon:n}),d(!0)},de=n=>{v.isOpen&&S&&a(i=>({...i,data:{...i.data,[S.fieldName]:n}})),d(!1),D(null)},ue=async n=>{if(v.isOpen){s(t.common.saving);try{const{id:i,...N}=n;let f=null;const E=v.data&&v.data.id?String(v.data.id):null,Q=i?String(i):null;if(v.mode==="edit"&&(f=E||Q),v.mode==="edit"&&(!f||f.length===0))throw new Error("Cannot save item in edit mode: Document ID is missing.");await M.current({type:v.type,action:v.mode,docId:f,payload:N}),r(),g({variant:"success",title:t.common.successTitle,message:t.common.successSave}),te()}catch(i){r();const N=v.mode==="edit"&&!v.data?.id?"فشل حفظ: الـ ID الخاص بالعنصر مفقود.":t.common.errorSave,f=i.message.includes("Document ID is missing")?"فشل حفظ: الـ ID الخاص بالعنصر مفقود (الرجاء التأكد من أن العنصر المحدد يحتوي على ID).":i.message||N;g({variant:"alert",title:t.common.errorTitle,message:f})}}},O=(n,i)=>{g({variant:"confirm",title:t.common.confirmDeleteTitle,message:t.common.confirmDeleteMessage,onConfirm:async()=>{s(t.common.saving);try{await M.current({type:n,action:"delete",docId:i}),r(),g({variant:"success",title:t.common.successTitle,message:t.common.successDelete})}catch(N){r(),g({variant:"alert",title:t.common.errorTitle,message:N.message||t.common.errorDelete})}}})},[me,ge,He]=A(c.useMemo(()=>I?$(R(G,"service_groups").withConverter(V()),X("order")):null,[I])),[xe,be,J]=A(c.useMemo(()=>m&&_?$(R(G,"services").withConverter(V()),Z("group_id","==",Number(_)),X("order")):null,[m,_])),[he,ve,K]=A(c.useMemo(()=>m&&b?$(R(G,"sub_services").withConverter(V()),Z("service_id","==",Number(b)),X("order")):null,[m,b])),[fe,pe,Be]=A(c.useMemo(()=>m&&b?$(R(G,"sub_sub_services").withConverter(V()),Z("service_id","==",Number(b))):null,[m,b]));c.useEffect(()=>{J&&console.error("Services Error:",J),K&&console.error("SubServices Error:",K)},[J,K]);const je=n=>{T(n),F(null),P(null)},ye=n=>{F(n),P(null)},we=n=>{P(n)},k=(n,i,N={})=>{let f=N,E=N;n==="create"&&(i==="service"?f={group_id:Number(_),is_allowed:!0,order:1}:i==="sub_service"?f={service_id:Number(b),is_allowed:!0,order:1}:i==="sub_sub_service"?f={service_id:Number(b),is_allowed:!0}:f={order:1},E={}),a({isOpen:!0,mode:n,type:i,data:f,originalData:E})},te=()=>{a({isOpen:!1})};c.useEffect(()=>{x(u)},[u,x]);const _e=l==="ar"?se:re,q=({title:n,data:i,selectedId:N,onSelect:f,onAdd:E,onEdit:Q,onDelete:Ne,type:Se,permission:De,loading:U,addLabel:Ce})=>De?e.jsxs("div",{className:"flex-1 min-w-[280px] h-full flex flex-col bg-gray-900/50 rounded-lg border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 border-b border-gray-700 bg-gray-900/80",children:[e.jsx("h3",{className:"font-bold text-white truncate",children:n}),E&&e.jsx(C.button,{onClick:E,variants:Y,whileHover:"hover",whileTap:"tap",className:"p-1.5 text-[#FFD700] rounded-full hover:bg-yellow-400/10 transition-colors",title:Ce,children:e.jsx(Re,{className:"w-5 h-5"})})]}),U&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:t.common.saving}),!U&&!i&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:Se==="group"?t.common.noData:t.common.selectGroup}),!U&&i&&i.length===0&&e.jsx("div",{className:"p-4 text-center text-gray-400",children:t.common.noData}),e.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar",children:i&&i.map(y=>e.jsxs(C.div,{onClick:()=>f&&f(y.id),className:`flex justify-between items-center p-3 cursor-pointer border-b border-gray-800 last:border-b-0 transition-colors ${N===y.id?"bg-yellow-400/10":"hover:bg-gray-800/60"}`,variants:H,children:[e.jsxs("div",{className:"flex-1 flex items-center gap-2 truncate",children:[e.jsx(B,{name:y.icon,className:`w-4 h-4 flex-shrink-0 ${N===y.id?"text-[#FFD700]":"text-gray-400"}`}),e.jsxs("div",{className:"truncate",children:[e.jsx("span",{className:`font-semibold ${N===y.id?"text-[#FFD700]":"text-gray-200"}`,children:y.name_ar||y.label_ar}),e.jsx("span",{className:"block text-xs text-gray-400 truncate",dir:"ltr",children:y.name_en||y.label_en||`(ID: ${y.id})`})]})]}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1.5 ltr:ml-2 rtl:mr-2",children:[e.jsx("button",{onClick:W=>{W.stopPropagation(),Q(y)},title:t.common.edit,className:"p-1.5 text-gray-400 hover:text-white rounded-md hover:bg-gray-700 transition-colors",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:W=>{W.stopPropagation(),Ne(y.id)},title:t.common.delete,className:"p-1.5 text-gray-400 hover:text-red-500 rounded-md hover:bg-gray-700 transition-colors",children:e.jsx(Ge,{className:"w-4 h-4"})}),f&&e.jsx(_e,{className:`w-5 h-5 ${N===y.id?"text-[#FFD700]":"text-gray-600"}`})]})]},y.id))})]}):e.jsx("div",{className:"flex-1 min-w-[250px] h-full flex flex-col p-2",children:e.jsx("div",{className:"flex items-center justify-center h-full text-center text-gray-500 bg-gray-900/50 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"p-4",children:[e.jsx(qe,{className:"w-10 h-10 mx-auto mb-2"}),e.jsx("span",{className:"text-sm font-semibold",children:t.permissionDenied})]})})});return e.jsxs(e.Fragment,{children:[e.jsx(ae,{mode:"wait",children:e.jsx(C.div,{custom:l,variants:Le,initial:"initial",animate:"animate",exit:"exit",children:e.jsxs(C.div,{variants:Oe,initial:"initial",animate:"animate",exit:"exit",className:"flex-grow bg-gray-800/50 rounded-xl shadow-2xl p-4 sm:p-6 border border-gray-700 flex flex-col h-full",children:[e.jsxs(C.h1,{variants:H,className:"text-xl font-bold text-[#FFD700] flex items-center gap-2 mb-4",children:[e.jsx($e,{className:"w-6 h-6"}),t.pageTitle]}),e.jsxs(C.div,{variants:H,className:"flex-grow flex flex-col md:flex-row gap-4 overflow-hidden h-[calc(100vh-250px)]",children:[e.jsx(q,{title:t.columnTitles.groups,data:me,selectedId:_,onSelect:je,onAdd:()=>k("create","service_group"),onEdit:n=>k("edit","service_group",n),onDelete:n=>O("service_group",n),type:"group",permission:I,loading:ge,addLabel:t.modalTitles.create+" "+t.modalTitles.service_group}),e.jsx(q,{title:t.columnTitles.services,data:xe,selectedId:b,onSelect:ye,onAdd:_?()=>k("create","service"):null,onEdit:n=>k("edit","service",n),onDelete:n=>O("service",n),type:"service",permission:m,loading:be,addLabel:t.modalTitles.create+" "+t.modalTitles.service}),e.jsx(q,{title:t.columnTitles.subServices,data:he,selectedId:o,onSelect:we,onAdd:b?()=>k("create","sub_service"):null,onEdit:n=>k("edit","sub_service",n),onDelete:n=>O("sub_service",n),type:"sub_service",permission:m,loading:ve,addLabel:t.modalTitles.create+" "+t.modalTitles.sub_service}),e.jsx(q,{title:t.columnTitles.subSubServices,data:fe,selectedId:null,onSelect:null,onAdd:b?()=>k("create","sub_sub_service"):null,onEdit:n=>k("edit","sub_sub_service",n),onDelete:n=>O("sub_sub_service",n),type:"sub_sub_service",permission:m,loading:pe,addLabel:t.modalTitles.create+" "+t.modalTitles.sub_sub_service})]})]})},"services-management-page")}),e.jsx(ze,{modalState:v,onClose:te,onSave:ue,translations:L,language:l,onOpenIconPicker:ce},"service-management-modal"),e.jsx(Ve,{isOpen:h,onClose:()=>d(!1),onSelectIcon:de,language:l,translations:L,initialIcon:S?.icon||null})]})}export{Xe as default};
